(this.webpackJsonpscheduler=this.webpackJsonpscheduler||[]).push([[0],{20:function(e,t,n){e.exports=n(50)},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),c=n.n(i),s=(n(25),n(26),n(5)),o=n.n(s);n(27);function l(e){var t=o()("day-list__item",{"day-list__item--selected":e.selected,"day-list__item--full":0===e.spots});return r.a.createElement("div",null,r.a.createElement("li",{"data-testid":"day",className:t,onClick:function(){return e.setDay(e.name)}},r.a.createElement("h2",{className:"text--regular"},e.name),r.a.createElement("h3",{className:"text--light"},0===e.spots?r.a.createElement("p",null,"no spots remaining"):1===e.spots?r.a.createElement("p",null,"1 spot remaining"):e.spots?r.a.createElement("p",null,e.spots," spots remaining"):void 0)))}function m(e){return r.a.createElement("ul",null,e.days.map((function(t){return r.a.createElement(l,{key:t.id,name:t.name,spots:t.spots,selected:t.name===e.day,setDay:e.setDay})})))}n(28);var u=function(e){return r.a.createElement("header",{className:"appointment__time"},r.a.createElement("h4",{className:"text--semi-bold"},e.time),r.a.createElement("hr",{className:"appointment__separator"}))};var d=function(e){return r.a.createElement("main",{className:"appointment__card appointment__card--show"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("h2",{className:"text--regular"},e.student),r.a.createElement("section",{className:"interviewer"},r.a.createElement("h4",{className:"text--light"},"Interviewer"),r.a.createElement("h3",{className:"text--regular"},e.interviewer))),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement("img",{className:"appointment__actions-button",src:"images/edit.png",alt:"Edit",onClick:e.onEdit}),r.a.createElement("img",{className:"appointment__actions-button",src:"images/trash.png",alt:"Delete",onClick:e.onDelete}))))};var p=function(e){return r.a.createElement("main",{className:"appointment__add"},r.a.createElement("img",{className:"appointment__add-button",src:"images/add.png",alt:"Add",onClick:e.onAdd}))},E=n(3);n(29),n(30);var v=function(e){var t=o()("interviewers__item",{"interviewers__item-image":e.avatar}),n=o()("interviewers__item",{"interviewers__item--selected":e.selected});return r.a.createElement("li",{className:n,onClick:e.setInterviewer},r.a.createElement("img",{key:e.id,className:t,src:e.avatar,alt:e.name}),e.selected&&e.name)};var _=function(e){return r.a.createElement("section",{className:"interviewers"},r.a.createElement("h4",{className:"interviewers__header text--light"},"Interviewer"),r.a.createElement("ul",{className:"interviewers__list"},e.interviewers.map((function(t){return r.a.createElement(v,{key:t.id,avatar:t.avatar,name:t.name,selected:t.id===e.value,setInterviewer:function(){return e.onChange(t.id)}})}))))};n(31);function f(e){var t=o()("button",{"button--confirm":e.confirm,"button--danger":e.danger});return r.a.createElement("button",{className:t,onClick:e.onClick,disabled:e.disabled},e.children)}var w=function(e){var t=Object(a.useState)(e.name||""),n=Object(E.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)(e.interviewer||null),o=Object(E.a)(s,2),l=o[0],m=o[1],u=Object(a.useState)(""),d=Object(E.a)(u,2),p=d[0],v=d[1];function w(){c(""),m(null),e.onCancel()}return r.a.createElement("main",{className:"appointment__card appointment__card--create"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("form",{autoComplete:"off",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{"data-testid":"student-name-input",className:"appointment__create-input text--semi-bold",name:"name",value:i,type:"text",placeholder:"Enter Student Name",onChange:function(e){return c(e.target.value)}})),r.a.createElement("section",{className:"appointment__validation"},p),r.a.createElement(_,{interviewers:e.interviewers,value:l,onChange:m})),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(f,{danger:!0,onClick:function(){return w()}},"Cancel"),r.a.createElement(f,{confirm:!0,onClick:function(){""!==i?null!==l?(v(""),e.onSave(i,l)):v("Interviewer cannot be blank"):v("Student name cannot be blank")}},"Save"))))};var b=function(e){return r.a.createElement("main",{className:"appointment__card appointment__card--status"},r.a.createElement("img",{className:"appointment__status-image",src:"images/status.png",alt:"Loading"}),r.a.createElement("h1",{className:"text--semi-bold"},e.message))};var O=function(e){return r.a.createElement("main",{className:"appointment__card appointment__card--confirm"},r.a.createElement("h1",{className:"text--semi-bold"},e.message),r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(f,{danger:!0,onClick:e.onCancel},"Cancel"),r.a.createElement(f,{danger:!0,onClick:e.onConfirm},"Confirm")))};var N=function(e){return r.a.createElement("main",{className:"appointment__card appointment__card--error"},r.a.createElement("section",{className:"appointment__error-message"},r.a.createElement("h1",{className:"text--semi-bold"},"Error"),r.a.createElement("h3",{className:"text--light"},e.message)),r.a.createElement("img",{className:"appointment__error-close",src:"images/close.png",alt:"Close",onClick:e.onClose}))},g=n(9),y=function(e){var t=Object(a.useState)(e),n=Object(E.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)([]),s=Object(E.a)(c,2),o=s[0],l=s[1];return{transition:function(e,t){t||l([].concat(Object(g.a)(o),[r])),i(e)},mode:r,back:function(){0===o.length&&o.push("EMPTY"),o.length>=1&&(i(o[o.length-1]),l(Object(g.a)(o.slice(0,-1))))}}};var h=function(e){var t=y(e.interview?"SHOW":"EMPTY"),n=t.mode,i=t.transition,c=t.back;function s(t,n){var a={student:t,interviewer:n};i("SAVING",!0),e.bookInterview(e.id,a).then((function(){return i("SHOW")})).catch((function(){return i("ERROR_SAVE",!0)}))}return Object(a.useEffect)((function(){e.interview&&"EMPTY"===n&&i("SHOW"),null===e.interview&&"SHOW"===n&&i("EMPTY")}),[e.interview,i,n]),r.a.createElement("article",{"data-testid":"appointment",className:"appointment"},r.a.createElement(u,{time:e.time}),"SHOW"===n&&e.interview&&r.a.createElement(d,{student:e.interview.student,interviewer:e.interview.interviewer.name,onDelete:function(){i("CONFRIM",!0)},onEdit:function(){return i("EDIT")}}),"EMPTY"===n&&r.a.createElement(p,{onAdd:function(){return i("CREATE")}}),"CREATE"===n&&r.a.createElement(w,{interviewers:e.interviewers,onCancel:c,onSave:s}),"SAVING"===n&&r.a.createElement(b,{message:"Saving Interview"}),"DELETING"===n&&r.a.createElement(b,{message:"Deleting Interview"}),"CONFRIM"===n&&r.a.createElement(O,{message:"Are you sure you would like to delete?",onConfirm:function(){i("DELETING",!0),e.deleteInterview(e.id).then((function(){return i("EMPTY")})).catch((function(e){return i("ERROR_DELETE",!0)}))},onCancel:c}),"EDIT"===n&&r.a.createElement(w,{interviewers:e.interviewers,name:e.interview.student,interviewer:e.interview.interviewer.id,onCancel:c,onSave:s}),"ERROR_SAVE"===n&&r.a.createElement(N,{message:"There was an error saving your interview.",onClose:c}),"ERROR_DELETE"===n&&r.a.createElement(N,{message:"There was an error deleting your interview.",onClose:c}))},S=n(7),T=n(1),C=n(4),j=n.n(C),I=function(e,t){switch(t.type){case"SET_DAY":return Object(T.a)(Object(T.a)({},e),{},{day:t.day});case"SET_APPLICATION_DATA":return Object(T.a)(Object(T.a)({},e),{},{days:t.days,appointments:t.appointments,interviewers:t.interviewers});case"SET_INTERVIEW":var n=t.newDays,a=t.appointments;return Object(T.a)(Object(T.a)({},e),{},{appointments:a,newDays:n});default:throw new Error("Tried to reduce with unsupported action type: ".concat(t.type))}};function D(e){var t=function(){var e=Object(a.useReducer)(I,{day:"Monday",days:[],appointments:{},interviewers:{}}),t=Object(E.a)(e,2),n=t[0],r=t[1];function i(){return Promise.all([Promise.resolve(j.a.get("/api/days")),Promise.resolve(j.a.get("/api/appointments")),Promise.resolve(j.a.get("/api/interviewers"))]).then((function(e){r({type:"SET_APPLICATION_DATA",days:e[0].data,appointments:e[1].data,interviewers:e[2].data})}))}function c(e,t){return Object.values(t).filter((function(t){return t.name===e}))[0]}function s(e,t,n){var a=5*c(e,t).id,r=a-4;return Object.values(n).filter((function(e){return e.id>=r&&e.id<=a&&null===e.interview})).length}return Object(a.useEffect)((function(){var e=new WebSocket(Object({NODE_ENV:"production",PUBLIC_URL:"/scheduler",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_WEBSOCKET_URL);return e.onmessage=function(e){if("SET_INTERVIEW"===JSON.parse(e.data).type)return i()},i(),function(){return e.close()}}),[]),{state:n,setDay:function(e){r({type:"SET_DAY",day:e})},bookInterview:function(e,t){var a=Object(T.a)(Object(T.a)({},n.appointments[e]),{},{interview:Object(T.a)({},t)}),i=Object(T.a)(Object(T.a)({},n.appointments),{},Object(S.a)({},e,a)),o=c(n.day,n.days);o.spots=s(n.day,n.days,i);var l=Object(T.a)(Object(T.a)({},n.days),o.spots);return j.a.put("api/appointments/".concat(e),{interview:t}).then((function(){return r({type:"SET_INTERVIEW",appointments:i,newDays:l})}))},deleteInterview:function(e){var t=Object(T.a)(Object(T.a)({},n.appointments[e]),{},{interview:null}),a=Object(T.a)(Object(T.a)({},n.appointments),{},Object(S.a)({},e,t)),i=c(n.day,n.days);i.spots=s(n.day,n.days,a);var o=Object(T.a)(Object(T.a)({},n.days),i.spots);return j.a.delete("api/appointments/".concat(e)).then((function(){return r({type:"SET_INTERVIEW",appointments:a,newDays:o})}))}}}(),n=t.state,i=t.setDay,c=t.bookInterview,s=t.deleteInterview,o=function(e,t){var n,a=[];for(var r in e.days.forEach((function(e){e.name===t&&(n=e.appointments)})),e.appointments){if(!n)return[];n.includes(Number(r))&&a.push(e.appointments[r])}return a}(n,n.day).map((function(e){var t=function(e,t){return t?{interviewer:e.interviewers[t.interviewer],student:t.student}:null}(n,e.interview),a=function(e,t){var n,a=[];for(var r in e.days.forEach((function(e){e.name===t&&(n=e.interviewers)})),e.interviewers){if(!n)return[];n.includes(Number(r))&&a.push(e.interviewers[r])}return a}(n,n.day);return r.a.createElement(h,{key:e.id,id:e.id,time:e.time,interview:t,bookInterview:c,deleteInterview:s,interviewers:a})}));return r.a.createElement("main",{className:"layout"},r.a.createElement("section",{className:"sidebar"},r.a.createElement("img",{className:"sidebar--centered",src:"images/logo.png",alt:"Interview Scheduler"}),r.a.createElement("hr",{className:"sidebar__separator sidebar--centered"}),r.a.createElement("nav",{className:"sidebar__menu"},r.a.createElement(m,{days:n.days,day:n.day,setDay:i})),r.a.createElement("img",{className:"sidebar__lhl sidebar--centered",src:"images/lhl.png",alt:"Lighthouse Labs"})),r.a.createElement("section",{className:"schedule"},o,r.a.createElement(h,{key:"last",time:"5pm"})))}Object({NODE_ENV:"production",PUBLIC_URL:"/scheduler",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL&&(j.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"/scheduler",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_BASE_URL),c.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.d8dccfcc.chunk.js.map